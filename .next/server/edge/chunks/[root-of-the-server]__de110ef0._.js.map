{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["// middleware.ts (ในโฟลเดอร์ root)\r\nimport { createMiddlewareClient } from '@supabase/auth-helpers-nextjs';\r\nimport { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nexport async function middleware(req: NextRequest) {\r\n  const res = NextResponse.next();\r\n  const supabase = createMiddlewareClient({ req, res });\r\n\r\n  const {\r\n    data: { session },\r\n  } = await supabase.auth.getSession();\r\n\r\n  const { pathname } = req.nextUrl;\r\n\r\n  // Protected routes\r\n  const protectedRoutes = ['/dashboard', '/console', '/result', '/setting'];\r\n  const isProtectedRoute = protectedRoutes.some(route => \r\n    pathname.startsWith(route)\r\n  );\r\n\r\n  // Auth routes\r\n  const authRoutes = ['/login', '/register'];\r\n  const isAuthRoute = authRoutes.includes(pathname);\r\n\r\n  // Redirect logic\r\n  if (!session && isProtectedRoute) {\r\n    const redirectUrl = req.nextUrl.clone();\r\n    redirectUrl.pathname = '/login';\r\n    return NextResponse.redirect(redirectUrl);\r\n  }\r\n\r\n  if (session && isAuthRoute) {\r\n    const redirectUrl = req.nextUrl.clone();\r\n    redirectUrl.pathname = '/dashboard';\r\n    return NextResponse.redirect(redirectUrl);\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    '/((?!api|_next/static|_next/image|favicon.ico).*)',\r\n  ],\r\n};\r\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;AAClC;AACA;AAAA;;;AAGO,eAAe,WAAW,GAAgB;IAC/C,MAAM,MAAM,6LAAA,CAAA,eAAY,CAAC,IAAI;IAC7B,MAAM,WAAW,CAAA,GAAA,gLAAA,CAAA,yBAAsB,AAAD,EAAE;QAAE;QAAK;IAAI;IAEnD,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAElC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,OAAO;IAEhC,mBAAmB;IACnB,MAAM,kBAAkB;QAAC;QAAc;QAAY;QAAW;KAAW;IACzE,MAAM,mBAAmB,gBAAgB,IAAI,CAAC,CAAA,QAC5C,SAAS,UAAU,CAAC;IAGtB,cAAc;IACd,MAAM,aAAa;QAAC;QAAU;KAAY;IAC1C,MAAM,cAAc,WAAW,QAAQ,CAAC;IAExC,iBAAiB;IACjB,IAAI,CAAC,WAAW,kBAAkB;QAChC,MAAM,cAAc,IAAI,OAAO,CAAC,KAAK;QACrC,YAAY,QAAQ,GAAG;QACvB,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,IAAI,WAAW,aAAa;QAC1B,MAAM,cAAc,IAAI,OAAO,CAAC,KAAK;QACrC,YAAY,QAAQ,GAAG;QACvB,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;KACD;AACH"}}]
}
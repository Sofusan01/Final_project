{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/Dashboard/dashboard/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n"],"names":[],"mappings":";;;AAGE;AAHF;;AAEO,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///D:/Dashboard/dashboard/src/components/AuthForm.tsx"],"sourcesContent":["// /src/components/AuthForm.tsx\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\ntype Props = {\r\n  type: \"login\" | \"register\";\r\n  onSubmit: (\r\n    email: string,\r\n    password: string,\r\n    firstName?: string,\r\n    lastName?: string\r\n  ) => Promise<void>;\r\n  loading?: boolean;\r\n};\r\n\r\nexport default function AuthForm({ type, onSubmit, loading }: Props) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [firstName, setFirstName] = useState(\"\");\r\n  const [lastName, setLastName] = useState(\"\");\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center\">\r\n      <form\r\n        onSubmit={async (e) => {\r\n          e.preventDefault();\r\n          await onSubmit(email, password, firstName, lastName);\r\n        }}\r\n        className=\"flex flex-col gap-5 w-full max-w-sm bg-neutral-900 p-8 rounded-2xl shadow-2xl\"\r\n      >\r\n        <h2 className=\"text-2xl font-bold text-center mb-2 text-white\">\r\n          {type === \"login\" ? \"เข้าสู่ระบบ\" : \"สมัครสมาชิก\"}\r\n        </h2>\r\n        {type === \"register\" && (\r\n          <>\r\n            <input\r\n              type=\"text\"\r\n              className=\"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700\"\r\n              placeholder=\"ชื่อ\"\r\n              value={firstName}\r\n              onChange={(e) => setFirstName(e.target.value)}\r\n              required\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              className=\"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700\"\r\n              placeholder=\"นามสกุล\"\r\n              value={lastName}\r\n              onChange={(e) => setLastName(e.target.value)}\r\n              required\r\n            />\r\n          </>\r\n        )}\r\n        <input\r\n          type=\"email\"\r\n          autoComplete=\"username\"\r\n          className=\"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700\"\r\n          placeholder=\"อีเมล\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          disabled={loading}\r\n          required\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          autoComplete={type === \"login\" ? \"current-password\" : \"new-password\"}\r\n          className=\"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700\"\r\n          placeholder=\"รหัสผ่าน\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          disabled={loading}\r\n          required\r\n          minLength={6}\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl py-2 transition\"\r\n        >\r\n          {loading\r\n            ? \"กำลังดำเนินการ...\"\r\n            : type === \"login\"\r\n              ? \"เข้าสู่ระบบ\"\r\n              : \"สมัครสมาชิก\"}\r\n        </button>\r\n      </form>\r\n      {/* ส่วนลิงก์สลับหน้า */}\r\n      {type === \"login\" ? (\r\n        <div className=\"text-center mt-4 text-neutral-400\">\r\n          ยังไม่มีบัญชี?{\" \"}\r\n          <Link\r\n            href=\"/register\"\r\n            className=\"text-blue-400 hover:underline font-semibold\"\r\n          >\r\n            สมัครสมาชิก\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center mt-4 text-neutral-400\">\r\n          มีบัญชีแล้ว?{\" \"}\r\n          <Link\r\n            href=\"/login\"\r\n            className=\"text-blue-400 hover:underline font-semibold\"\r\n          >\r\n            เข้าสู่ระบบ\r\n          </Link>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;AAC/B;AACA;;;;;AAae,SAAS,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAS;;IACjE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,UAAU,OAAO;oBACf,EAAE,cAAc;oBAChB,MAAM,SAAS,OAAO,UAAU,WAAW;gBAC7C;gBACA,WAAU;;kCAEV,6LAAC;wBAAG,WAAU;kCACX,SAAS,UAAU,gBAAgB;;;;;;oBAErC,SAAS,4BACR;;0CACE,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;gCAC5C,QAAQ;;;;;;0CAEV,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gCAC3C,QAAQ;;;;;;;;kCAId,6LAAC;wBACC,MAAK;wBACL,cAAa;wBACb,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,UAAU;wBACV,QAAQ;;;;;;kCAEV,6LAAC;wBACC,MAAK;wBACL,cAAc,SAAS,UAAU,qBAAqB;wBACtD,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wBAC3C,UAAU;wBACV,QAAQ;wBACR,WAAW;;;;;;kCAEb,6LAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAU;kCAET,UACG,sBACA,SAAS,UACP,gBACA;;;;;;;;;;;;YAIT,SAAS,wBACR,6LAAC;gBAAI,WAAU;;oBAAoC;oBAClC;kCACf,6LAAC,+JAAA,CAAA,UAAI;wBACH,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;qCAKH,6LAAC;gBAAI,WAAU;;oBAAoC;oBACpC;kCACb,6LAAC,+JAAA,CAAA,UAAI;wBACH,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAOX;GA/FwB;KAAA","debugId":null}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///D:/Dashboard/dashboard/src/components/Modal.tsx"],"sourcesContent":["// /src/components/Modal.tsx\r\n\"use client\";\r\nimport React from \"react\";\r\n\r\ntype ModalProps = {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  title?: string;\r\n  message: string;\r\n};\r\n\r\nexport default function Modal({ open, onClose, title, message }: ModalProps) {\r\n  if (!open) return null;\r\n  return (\r\n    <div className=\"fixed z-40 inset-0 flex items-center justify-center bg-black/50\">\r\n      <div className=\"bg-neutral-900 rounded-2xl shadow-2xl p-6 min-w-[320px] max-w-xs text-white\">\r\n        {title && <h3 className=\"font-bold text-lg mb-2\">{title}</h3>}\r\n        <p>{message}</p>\r\n        <button\r\n          className=\"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl py-2 transition\"\r\n          onClick={onClose}\r\n        >\r\n          ปิด\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAC5B;;AAUe,SAAS,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAc;IACzE,IAAI,CAAC,MAAM,OAAO;IAClB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;gBACZ,uBAAS,6LAAC;oBAAG,WAAU;8BAA0B;;;;;;8BAClD,6LAAC;8BAAG;;;;;;8BACJ,6LAAC;oBACC,WAAU;oBACV,SAAS;8BACV;;;;;;;;;;;;;;;;;AAMT;KAhBwB","debugId":null}},
    {"offset": {"line": 252, "column": 0}, "map": {"version":3,"sources":["file:///D:/Dashboard/dashboard/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport AuthForm from \"@/components/AuthForm\";\r\nimport Modal from \"@/components/Modal\";\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [checkingSession, setCheckingSession] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n  const [modal, setModal] = useState<{ open: boolean; msg: string }>({\r\n    open: false,\r\n    msg: \"\",\r\n  });\r\n\r\n  // เช็ค session ทุกครั้งที่ mount\r\n  useEffect(() => {\r\n    const checkSession = async () => {\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      if (session) {\r\n        router.replace(\"/dashboard\");\r\n      } else {\r\n        setCheckingSession(false);\r\n      }\r\n    };\r\n    checkSession();\r\n  }, [router]);\r\n\r\n  // Listen for auth state changes\r\n  useEffect(() => {\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (event === 'SIGNED_IN' && session) {\r\n          setModal({ open: true, msg: \"เข้าสู่ระบบสำเร็จ กำลังเปลี่ยนหน้า...\" });\r\n          setTimeout(() => {\r\n            router.replace(\"/dashboard\");\r\n          }, 1000);\r\n        }\r\n      }\r\n    );\r\n    return () => subscription.unsubscribe();\r\n  }, [router]);\r\n\r\n  const handleLogin = async (email: string, password: string) => {\r\n    setLoading(true);\r\n    const { error } = await supabase.auth.signInWithPassword({ email, password });\r\n    setLoading(false);\r\n\r\n    if (error) {\r\n      setModal({ open: true, msg: error.message });\r\n    }\r\n    // redirect จะถูก handle ที่ onAuthStateChange\r\n  };\r\n\r\n  // Loading skeleton\r\n  if (checkingSession) {\r\n    return (\r\n      <main className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#111] via-[#232323] to-[#1a237e]\">\r\n        <div className=\"text-white text-lg animate-pulse\">Loading...</div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#111] via-[#232323] to-[#1a237e]\">\r\n      <AuthForm type=\"login\" onSubmit={handleLogin} loading={loading} />\r\n      <Modal\r\n        open={modal.open}\r\n        message={modal.msg}\r\n        onClose={() => setModal({ ...modal, open: false })}\r\n      />\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;;;AALA;;;;;;AAOe,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAkC;QACjE,MAAM;QACN,KAAK;IACP;IAEA,iCAAiC;IACjC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,MAAM;oDAAe;oBACnB,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,yHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,UAAU;oBAC5D,IAAI,SAAS;wBACX,OAAO,OAAO,CAAC;oBACjB,OAAO;wBACL,mBAAmB;oBACrB;gBACF;;YACA;QACF;8BAAG;QAAC;KAAO;IAEX,gCAAgC;IAChC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,yHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,iBAAiB;uCAChE,OAAO,OAAO;oBACZ,IAAI,UAAU,eAAe,SAAS;wBACpC,SAAS;4BAAE,MAAM;4BAAM,KAAK;wBAAwC;wBACpE;mDAAW;gCACT,OAAO,OAAO,CAAC;4BACjB;kDAAG;oBACL;gBACF;;YAEF;uCAAO,IAAM,aAAa,WAAW;;QACvC;8BAAG;QAAC;KAAO;IAEX,MAAM,cAAc,OAAO,OAAe;QACxC,WAAW;QACX,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;YAAE;YAAO;QAAS;QAC3E,WAAW;QAEX,IAAI,OAAO;YACT,SAAS;gBAAE,MAAM;gBAAM,KAAK,MAAM,OAAO;YAAC;QAC5C;IACA,8CAA8C;IAChD;IAEA,mBAAmB;IACnB,IAAI,iBAAiB;QACnB,qBACE,6LAAC;YAAK,WAAU;sBACd,cAAA,6LAAC;gBAAI,WAAU;0BAAmC;;;;;;;;;;;IAGxD;IAEA,qBACE,6LAAC;QAAK,WAAU;;0BACd,6LAAC,iIAAA,CAAA,UAAQ;gBAAC,MAAK;gBAAQ,UAAU;gBAAa,SAAS;;;;;;0BACvD,6LAAC,8HAAA,CAAA,UAAK;gBACJ,MAAM,MAAM,IAAI;gBAChB,SAAS,MAAM,GAAG;gBAClB,SAAS,IAAM,SAAS;wBAAE,GAAG,KAAK;wBAAE,MAAM;oBAAM;;;;;;;;;;;;AAIxD;GAnEwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}}]
}
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{11175:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(95155);function l(e){let{open:t,onClose:r,title:l,message:a}=e;return t?(0,s.jsx)("div",{className:"fixed z-40 inset-0 flex items-center justify-center bg-black/50",children:(0,s.jsxs)("div",{className:"bg-neutral-900 rounded-2xl shadow-2xl p-6 min-w-[320px] max-w-xs text-white",children:[l&&(0,s.jsx)("h3",{className:"font-bold text-lg mb-2",children:l}),(0,s.jsx)("p",{children:a}),(0,s.jsx)("button",{className:"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl py-2 transition",onClick:r,children:"ปิด"})]})}):null}r(12115)},23460:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(95155),l=r(12115),a=r(6874),n=r.n(a);function i(e){let{type:t,onSubmit:r,loading:a}=e,[i,o]=(0,l.useState)(""),[u,d]=(0,l.useState)(""),[c,x]=(0,l.useState)(""),[m,p]=(0,l.useState)("");return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await r(i,u,c,m)},className:"flex flex-col gap-5 w-full max-w-sm bg-neutral-900 p-8 rounded-2xl shadow-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-center mb-2 text-white",children:"login"===t?"เข้าสู่ระบบ":"สมัครสมาชิก"}),"register"===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"ชื่อ",value:c,onChange:e=>x(e.target.value),required:!0}),(0,s.jsx)("input",{type:"text",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"นามสกุล",value:m,onChange:e=>p(e.target.value),required:!0})]}),(0,s.jsx)("input",{type:"email",autoComplete:"username",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"อีเมล",value:i,onChange:e=>o(e.target.value),disabled:a,required:!0}),(0,s.jsx)("input",{type:"password",autoComplete:"login"===t?"current-password":"new-password",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"รหัสผ่าน",value:u,onChange:e=>d(e.target.value),disabled:a,required:!0,minLength:6}),(0,s.jsx)("button",{type:"submit",disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl py-2 transition",children:a?"กำลังดำเนินการ...":"login"===t?"เข้าสู่ระบบ":"สมัครสมาชิก"})]}),"login"===t?(0,s.jsxs)("div",{className:"text-center mt-4 text-neutral-400",children:["ยังไม่มีบัญชี?"," ",(0,s.jsx)(n(),{href:"/register",className:"text-blue-400 hover:underline font-semibold",children:"สมัครสมาชิก"})]}):(0,s.jsxs)("div",{className:"text-center mt-4 text-neutral-400",children:["มีบัญชีแล้ว?"," ",(0,s.jsx)(n(),{href:"/login",className:"text-blue-400 hover:underline font-semibold",children:"เข้าสู่ระบบ"})]})]})}},41335:(e,t,r)=>{Promise.resolve().then(r.bind(r,86616))},42099:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(34982).UU)("https://filyujdgxtjoqkebvegb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZpbHl1amRneHRqb3FrZWJ2ZWdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTk1NjAsImV4cCI6MjA2NjMzNTU2MH0.2-CROlvK_eQYoIvI9PqRRmLGOfLD2TQnsQfwMAyxJ0k")},86616:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(95155),l=r(12115),a=r(35695),n=r(42099),i=r(23460),o=r(11175);function u(){let e=(0,a.useRouter)(),[t,r]=(0,l.useState)(!1),[u,d]=(0,l.useState)({open:!1,msg:""});(0,l.useEffect)(()=>{(async()=>{let{data:{session:t}}=await n.N.auth.getSession();t&&e.replace("/dashboard")})()},[e]);let c=async(t,s,l,a)=>{r(!0);try{var i;let{data:r,error:o}=await n.N.auth.signUp({email:t,password:s,options:{data:{firstName:l||"",lastName:a||""}}});if(o)return void d({open:!0,msg:o.message});let u=null==(i=r.user)?void 0:i.id;if(u&&l&&a){let{error:e}=await n.N.from("profiles").insert([{id:u,first_name:l,last_name:a,email:t}]);e&&console.error("Profile creation error:",e)}d({open:!0,msg:"สมัครสมาชิกสำเร็จ! ตรวจสอบอีเมลเพื่อยืนยันตัวตน แล้วเข้าสู่ระบบ"}),setTimeout(()=>e.push("/login"),2200)}catch(e){console.error("Registration error:",e),d({open:!0,msg:"เกิดข้อผิดพลาดในการสมัครสมาชิก"})}finally{r(!1)}};return(0,s.jsxs)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#111] via-[#232323] to-[#1a237e]",children:[(0,s.jsx)(i.A,{type:"register",onSubmit:c,loading:t}),(0,s.jsx)(o.A,{open:u.open,message:u.msg,onClose:()=>d({...u,open:!1})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[982,244,441,684,358],()=>t(41335)),_N_E=e.O()}]);
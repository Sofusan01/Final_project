{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/Dashboard/dashboard/src/lib/firebase.ts"],"sourcesContent":["// /lib/firebase.ts\r\nimport { initializeApp, getApps } from \"firebase/app\";\r\nimport { getDatabase } from \"firebase/database\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDRn8HHi_a4SAgFDAOvm0-ks_IGVfhCEZ0\",\r\n  authDomain: \"dashboard-4de68.firebaseapp.com\",\r\n  databaseURL: \"https://dashboard-4de68-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n  projectId: \"dashboard-4de68\",\r\n  storageBucket: \"dashboard-4de68.firebasestorage.app\",\r\n  messagingSenderId: \"759947044425\",\r\n  appId: \"1:759947044425:web:6db0a728a2b831d26f8198\",\r\n  measurementId: \"G-RRNL8VHNL4\"\r\n};\r\n\r\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApps()[0];\r\nexport const db = getDatabase(app);\r\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;AACnB;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,aAAa;IACb,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,MAAM,MAAM,CAAC,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,uLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD,GAAG,CAAC,EAAE;AACrE,MAAM,KAAK,CAAA,GAAA,qKAAA,CAAA,cAAW,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///D:/Dashboard/dashboard/src/app/%28dashboard%29/setting/page.tsx"],"sourcesContent":["// /src/app/(dashboard)/setting/page.tsx\r\n\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ref, set, onValue } from \"firebase/database\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport {\r\n  Settings, Database, Clock, Save, Loader2, CheckCircle,\r\n  AlertCircle, Activity, Timer\r\n} from \"lucide-react\";\r\n\r\nexport default function SettingPage() {\r\n  const [enabled, setEnabled] = useState(false);\r\n  const [interval, setInterval] = useState(10);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [saved, setSaved] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // โหลดค่าปัจจุบันจาก Firebase RTDB\r\n  useEffect(() => {\r\n    const syncRef = ref(db, \"setting/sync\");\r\n    const unsub = onValue(\r\n      syncRef,\r\n      (snap) => {\r\n        const data = snap.val();\r\n        if (data) {\r\n          setEnabled(data.log_enabled);\r\n          setInterval(data.log_interval_minutes);\r\n        }\r\n        setLoading(false);\r\n      },\r\n      (err) => {\r\n        setError(err.message);\r\n        setLoading(false);\r\n      }\r\n    );\r\n    return () => unsub();\r\n  }, []);\r\n\r\n  // Save ค่าใหม่ลง RTDB\r\n  async function save() {\r\n    try {\r\n      setSaving(true);\r\n      setError(null);\r\n      await set(ref(db, \"setting/sync\"), {\r\n        log_enabled: enabled,\r\n        log_interval_minutes: interval,\r\n        updated_at: new Date().toISOString()\r\n      });\r\n      setSaved(true);\r\n      setTimeout(() => setSaved(false), 3000);\r\n\r\n    } catch (err) {\r\n      if (err instanceof Error) {\r\n        setError(err.message);\r\n      } else {\r\n        setError(\"เกิดข้อผิดพลาดในการบันทึก\");\r\n      }\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"w-full max-w-2xl mx-auto p-6\">\r\n        <div className=\"bg-slate-800 rounded-2xl shadow-lg border border-slate-700 p-8\">\r\n          <div className=\"flex items-center justify-center\">\r\n            <Loader2 className=\"w-8 h-8 animate-spin text-slate-300\" />\r\n            <span className=\"ml-3 text-slate-400\">Loading settings...</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full max-w-2xl mx-auto p-6 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"bg-slate-800 rounded-2xl shadow-lg border border-slate-700 p-6\">\r\n        <div className=\"flex items-center gap-3 mb-2\">\r\n          <div className=\"bg-slate-600 p-2 rounded-lg\">\r\n            <Settings className=\"w-6 h-6 text-slate-300\" />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-white\">\r\n              System Settings\r\n            </h1>\r\n            <p className=\"text-slate-400\">\r\n              ตั้งค่าระบบเก็บ Sensor Log\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"bg-red-900/30 border border-red-700 rounded-xl p-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <AlertCircle className=\"w-5 h-5 text-red-400\" />\r\n            <span className=\"text-red-300 font-medium\">Error</span>\r\n          </div>\r\n          <p className=\"text-red-300 text-sm mt-1\">{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Success Message */}\r\n      {saved && (\r\n        <div className=\"bg-green-900/30 border border-green-700 rounded-xl p-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <CheckCircle className=\"w-5 h-5 text-green-400\" />\r\n            <span className=\"text-green-300 font-medium\">\r\n              บันทึกเรียบร้อย!\r\n            </span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Settings Form */}\r\n      <div className=\"bg-slate-800 rounded-2xl shadow-lg border border-slate-700 p-6 space-y-6\">\r\n        {/* Auto Logging Toggle */}\r\n        <div className=\"flex items-center justify-between p-4 bg-slate-700 rounded-xl\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-slate-600 rounded-lg\">\r\n              <Database className=\"w-5 h-5 text-slate-300\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"font-semibold text-white\">\r\n                เปิดระบบเก็บ Log อัตโนมัติ\r\n              </h3>\r\n              <p className=\"text-sm text-slate-400\">\r\n                เก็บข้อมูลเซ็นเซอร์ลงฐานข้อมูลอัตโนมัติ\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <label className=\"relative inline-block w-14 h-8 cursor-pointer\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={enabled}\r\n              onChange={e => setEnabled(e.target.checked)}\r\n              disabled={saving}\r\n              className=\"sr-only peer\"\r\n            />\r\n            <div className={`\r\n              w-14 h-8 rounded-full transition-colors duration-300\r\n              ${enabled\r\n                ? \"bg-blue-600\"\r\n                : \"bg-slate-600\"\r\n              }\r\n              ${saving ? \"opacity-50 cursor-not-allowed\" : \"\"}\r\n            `}>\r\n              <div className={`\r\n                absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md\r\n                transform transition-transform duration-300\r\n                ${enabled ? \"translate-x-6\" : \"translate-x-0\"}\r\n              `} />\r\n            </div>\r\n          </label>\r\n        </div>\r\n\r\n        {/* Interval Setting */}\r\n        <div className=\"p-4 bg-slate-700 rounded-xl\">\r\n          <div className=\"flex items-center gap-3 mb-4\">\r\n            <div className=\"p-2 bg-slate-600 rounded-lg\">\r\n              <Timer className=\"w-5 h-5 text-slate-300\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"font-semibold text-white\">\r\n                ความถี่ในการเก็บข้อมูล\r\n              </h3>\r\n              <p className=\"text-sm text-slate-400\">\r\n                กำหนดช่วงเวลาในการบันทึกข้อมูลเซ็นเซอร์\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"flex items-center gap-2 bg-slate-600 rounded-lg p-3 border border-slate-500\">\r\n              <Clock className=\"w-4 h-4 text-slate-400\" />\r\n              <input\r\n                type=\"number\"\r\n                className=\"bg-transparent border-none outline-none w-16 text-center font-medium text-white\"\r\n                value={interval}\r\n                min={1}\r\n                max={120}\r\n                onChange={e => setInterval(Number(e.target.value))}\r\n                disabled={saving}\r\n              />\r\n              <span className=\"text-slate-400 text-sm\">นาที</span>\r\n            </div>\r\n\r\n            <div className=\"text-sm text-slate-400\">\r\n              ต่อครั้ง\r\n            </div>\r\n          </div>\r\n\r\n          {/* Interval suggestions */}\r\n          <div className=\"mt-3 flex gap-2\">\r\n            {[5, 10, 15, 30, 60].map((minutes) => (\r\n              <button\r\n                key={minutes}\r\n                onClick={() => setInterval(minutes)}\r\n                disabled={saving}\r\n                className={`\r\n                  px-3 py-1 rounded-lg text-xs font-medium transition-all duration-200\r\n                  ${interval === minutes\r\n                    ? \"bg-blue-600 text-white\"\r\n                    : \"bg-slate-600 text-slate-300 hover:bg-slate-500 border border-slate-500\"\r\n                  }\r\n                  ${saving ? \"opacity-50 cursor-not-allowed\" : \"\"}\r\n                `}\r\n              >\r\n                {minutes}m\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Info */}\r\n        <div className=\"p-4 bg-slate-700 rounded-xl border border-slate-600\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Activity className=\"w-5 h-5 text-slate-400\" />\r\n            <div>\r\n              <h4 className=\"font-medium text-white\">\r\n                สถานะปัจจุบัน\r\n              </h4>\r\n              <p className=\"text-sm text-slate-400\">\r\n                {enabled\r\n                  ? `เก็บข้อมูลทุก ${interval} นาที`\r\n                  : \"ระบบเก็บ Log ปิดอยู่\"\r\n                }\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Save Button */}\r\n        <button\r\n          onClick={save}\r\n          disabled={saving}\r\n          className={`\r\n            w-full flex items-center justify-center gap-2 py-3 rounded-xl font-semibold transition-all duration-200\r\n            ${saving\r\n              ? \"bg-slate-600 text-slate-400 cursor-not-allowed\"\r\n              : \"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl\"\r\n            }\r\n          `}\r\n        >\r\n          {saving ? (\r\n            <>\r\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n              กำลังบันทึก...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Save className=\"w-5 h-5\" />\r\n              บันทึกการตั้งค่า\r\n            </>\r\n          )}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{11175:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(95155);function a(e){let{open:t,onClose:r,title:a,message:l}=e;return t?(0,s.jsx)("div",{className:"fixed z-40 inset-0 flex items-center justify-center bg-black/50",children:(0,s.jsxs)("div",{className:"bg-neutral-900 rounded-2xl shadow-2xl p-6 min-w-[320px] max-w-xs text-white",children:[a&&(0,s.jsx)("h3",{className:"font-bold text-lg mb-2",children:a}),(0,s.jsx)("p",{children:l}),(0,s.jsx)("button",{className:"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl py-2 transition",onClick:r,children:"ปิด"})]})}):null}r(12115)},23460:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(95155),a=r(12115),l=r(6874),n=r.n(l);function i(e){let{type:t,onSubmit:r,loading:l}=e,[i,o]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[c,m]=(0,a.useState)(""),[x,h]=(0,a.useState)("");return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await r(i,d,c,x)},className:"flex flex-col gap-5 w-full max-w-sm bg-neutral-900 p-8 rounded-2xl shadow-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-center mb-2 text-white",children:"login"===t?"เข้าสู่ระบบ":"สมัครสมาชิก"}),"register"===t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"ชื่อ",value:c,onChange:e=>m(e.target.value),required:!0}),(0,s.jsx)("input",{type:"text",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"นามสกุล",value:x,onChange:e=>h(e.target.value),required:!0})]}),(0,s.jsx)("input",{type:"email",autoComplete:"username",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"อีเมล",value:i,onChange:e=>o(e.target.value),disabled:l,required:!0}),(0,s.jsx)("input",{type:"password",autoComplete:"login"===t?"current-password":"new-password",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"รหัสผ่าน",value:d,onChange:e=>u(e.target.value),disabled:l,required:!0,minLength:6}),(0,s.jsx)("button",{type:"submit",disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl py-2 transition",children:l?"กำลังดำเนินการ...":"login"===t?"เข้าสู่ระบบ":"สมัครสมาชิก"})]}),"login"===t?(0,s.jsxs)("div",{className:"text-center mt-4 text-neutral-400",children:["ยังไม่มีบัญชี?"," ",(0,s.jsx)(n(),{href:"/register",className:"text-blue-400 hover:underline font-semibold",children:"สมัครสมาชิก"})]}):(0,s.jsxs)("div",{className:"text-center mt-4 text-neutral-400",children:["มีบัญชีแล้ว?"," ",(0,s.jsx)(n(),{href:"/login",className:"text-blue-400 hover:underline font-semibold",children:"เข้าสู่ระบบ"})]})]})}},24751:(e,t,r)=>{Promise.resolve().then(r.bind(r,86616))},42099:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(34982).UU)("https://filyujdgxtjoqkebvegb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZpbHl1amRneHRqb3FrZWJ2ZWdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTk1NjAsImV4cCI6MjA2NjMzNTU2MH0.2-CROlvK_eQYoIvI9PqRRmLGOfLD2TQnsQfwMAyxJ0k")},86616:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(95155),a=r(12115),l=r(35695),n=r(42099),i=r(23460),o=r(11175);function d(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),[c,m]=(0,a.useState)({open:!1,msg:""});(0,a.useEffect)(()=>{(async()=>{let{data:{session:t}}=await n.N.auth.getSession();t?e.replace("/dashboard"):r(!1)})()},[e]);let x=async(t,r,s,a)=>{u(!0);try{var l;let{data:i,error:o}=await n.N.auth.signUp({email:t,password:r,options:{data:{firstName:s||"",lastName:a||""}}});if(o)return void m({open:!0,msg:o.message});let d=null==(l=i.user)?void 0:l.id;if(d&&s&&a){let{error:e}=await n.N.from("profiles").insert([{id:d,first_name:s,last_name:a,email:t}]);e&&console.error("Profile creation error:",e)}m({open:!0,msg:"สมัครสมาชิกสำเร็จ! ตรวจสอบอีเมลเพื่อยืนยันตัวตน แล้วเข้าสู่ระบบ"}),setTimeout(()=>e.replace("/login"),2200)}catch(e){console.error("Registration error:",e),m({open:!0,msg:"เกิดข้อผิดพลาดในการสมัครสมาชิก"})}finally{u(!1)}};return t?(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#111] via-[#232323] to-[#1a237e]",children:(0,s.jsx)("div",{className:"text-white text-lg animate-pulse",children:"Loading..."})}):(0,s.jsxs)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#111] via-[#232323] to-[#1a237e]",children:[(0,s.jsx)(i.A,{type:"register",onSubmit:x,loading:d}),(0,s.jsx)(o.A,{open:c.open,message:c.msg,onClose:()=>m({...c,open:!1})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[982,244,441,684,358],()=>t(24751)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{9690:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(95155),l=s(12115),n=s(35695),r=s(42099),i=s(23460),u=s(11175);function o(){let e=(0,n.useRouter)(),[t,s]=(0,l.useState)(!1),[o,d]=(0,l.useState)({open:!1,msg:""});(0,l.useEffect)(()=>{(async()=>{let{data:{session:t}}=await r.N.auth.getSession();t&&e.replace("/dashboard")})()},[e]),(0,l.useEffect)(()=>{let{data:{subscription:t}}=r.N.auth.onAuthStateChange(async(t,s)=>{"SIGNED_IN"===t&&s&&(d({open:!0,msg:"เข้าสู่ระบบสำเร็จ กำลังเปลี่ยนหน้า..."}),setTimeout(()=>{e.replace("/dashboard")},1e3))});return()=>t.unsubscribe()},[e]);let c=async(e,t)=>{s(!0);let{error:a}=await r.N.auth.signInWithPassword({email:e,password:t});s(!1),a&&d({open:!0,msg:a.message})};return(0,a.jsxs)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#111] via-[#232323] to-[#1a237e]",children:[(0,a.jsx)(i.A,{type:"login",onSubmit:c,loading:t}),(0,a.jsx)(u.A,{open:o.open,message:o.msg,onClose:()=>d({...o,open:!1})})]})}},11175:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(95155);function l(e){let{open:t,onClose:s,title:l,message:n}=e;return t?(0,a.jsx)("div",{className:"fixed z-40 inset-0 flex items-center justify-center bg-black/50",children:(0,a.jsxs)("div",{className:"bg-neutral-900 rounded-2xl shadow-2xl p-6 min-w-[320px] max-w-xs text-white",children:[l&&(0,a.jsx)("h3",{className:"font-bold text-lg mb-2",children:l}),(0,a.jsx)("p",{children:n}),(0,a.jsx)("button",{className:"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl py-2 transition",onClick:s,children:"ปิด"})]})}):null}s(12115)},23460:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(95155),l=s(12115),n=s(6874),r=s.n(n);function i(e){let{type:t,onSubmit:s,loading:n}=e,[i,u]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[c,x]=(0,l.useState)(""),[m,b]=(0,l.useState)("");return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await s(i,o,c,m)},className:"flex flex-col gap-5 w-full max-w-sm bg-neutral-900 p-8 rounded-2xl shadow-2xl",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-2 text-white",children:"login"===t?"เข้าสู่ระบบ":"สมัครสมาชิก"}),"register"===t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"ชื่อ",value:c,onChange:e=>x(e.target.value),required:!0}),(0,a.jsx)("input",{type:"text",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"นามสกุล",value:m,onChange:e=>b(e.target.value),required:!0})]}),(0,a.jsx)("input",{type:"email",autoComplete:"username",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"อีเมล",value:i,onChange:e=>u(e.target.value),disabled:n,required:!0}),(0,a.jsx)("input",{type:"password",autoComplete:"login"===t?"current-password":"new-password",className:"rounded-xl px-4 py-2 bg-neutral-800 text-white border border-neutral-700",placeholder:"รหัสผ่าน",value:o,onChange:e=>d(e.target.value),disabled:n,required:!0,minLength:6}),(0,a.jsx)("button",{type:"submit",disabled:n,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl py-2 transition",children:n?"กำลังดำเนินการ...":"login"===t?"เข้าสู่ระบบ":"สมัครสมาชิก"})]}),"login"===t?(0,a.jsxs)("div",{className:"text-center mt-4 text-neutral-400",children:["ยังไม่มีบัญชี?"," ",(0,a.jsx)(r(),{href:"/register",className:"text-blue-400 hover:underline font-semibold",children:"สมัครสมาชิก"})]}):(0,a.jsxs)("div",{className:"text-center mt-4 text-neutral-400",children:["มีบัญชีแล้ว?"," ",(0,a.jsx)(r(),{href:"/login",className:"text-blue-400 hover:underline font-semibold",children:"เข้าสู่ระบบ"})]})]})}},42099:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(34982).UU)("https://filyujdgxtjoqkebvegb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZpbHl1amRneHRqb3FrZWJ2ZWdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTk1NjAsImV4cCI6MjA2NjMzNTU2MH0.2-CROlvK_eQYoIvI9PqRRmLGOfLD2TQnsQfwMAyxJ0k")},75025:(e,t,s)=>{Promise.resolve().then(s.bind(s,9690))}},e=>{var t=t=>e(e.s=t);e.O(0,[982,244,441,684,358],()=>t(75025)),_N_E=e.O()}]);
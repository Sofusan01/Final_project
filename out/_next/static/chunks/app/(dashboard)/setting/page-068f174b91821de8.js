(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{381:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},14186:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},16139:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var t=a(95155),l=a(12115),d=a(81115),r=a(56104),n=a(51154),c=a(381),i=a(85339),x=a(40646),o=a(19946);let m=(0,o.A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var h=a(46561),u=a(14186),b=a(79397);let p=(0,o.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function g(){let[e,s]=(0,l.useState)(!1),[a,o]=(0,l.useState)(10),[g,j]=(0,l.useState)(!0),[y,N]=(0,l.useState)(!1),[v,f]=(0,l.useState)(!1),[w,k]=(0,l.useState)(null);async function A(){try{N(!0),k(null),await (0,d.hZ)((0,d.KR)(r.db,"setting/sync"),{log_enabled:e,log_interval_minutes:a,updated_at:new Date().toISOString()}),f(!0),setTimeout(()=>f(!1),3e3)}catch(e){e instanceof Error?k(e.message):k("เกิดข้อผิดพลาดในการบันทึก")}}return((0,l.useEffect)(()=>{let e=(0,d.KR)(r.db,"setting/sync"),a=(0,d.Zy)(e,e=>{let a=e.val();a&&(s(a.log_enabled),o(a.log_interval_minutes)),j(!1)},e=>{k(e.message),j(!1)});return()=>a()},[]),g)?(0,t.jsx)("div",{className:"w-full max-w-2xl mx-auto p-6",children:(0,t.jsx)("div",{className:"bg-slate-800 rounded-2xl shadow-lg border border-slate-700 p-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)(n.A,{className:"w-8 h-8 animate-spin text-slate-300"}),(0,t.jsx)("span",{className:"ml-3 text-slate-400",children:"Loading settings..."})]})})}):(0,t.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-slate-800 rounded-2xl shadow-lg border border-slate-700 p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"bg-slate-600 p-2 rounded-lg",children:(0,t.jsx)(c.A,{className:"w-6 h-6 text-slate-300"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"System Settings"}),(0,t.jsx)("p",{className:"text-slate-400",children:"ตั้งค่าระบบเก็บ Sensor Log"})]})]})}),w&&(0,t.jsxs)("div",{className:"bg-red-900/30 border border-red-700 rounded-xl p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.A,{className:"w-5 h-5 text-red-400"}),(0,t.jsx)("span",{className:"text-red-300 font-medium",children:"Error"})]}),(0,t.jsx)("p",{className:"text-red-300 text-sm mt-1",children:w})]}),v&&(0,t.jsx)("div",{className:"bg-green-900/30 border border-green-700 rounded-xl p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"w-5 h-5 text-green-400"}),(0,t.jsx)("span",{className:"text-green-300 font-medium",children:"บันทึกเรียบร้อย!"})]})}),(0,t.jsxs)("div",{className:"bg-slate-800 rounded-2xl shadow-lg border border-slate-700 p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-700 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-slate-600 rounded-lg",children:(0,t.jsx)(m,{className:"w-5 h-5 text-slate-300"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white",children:"เปิดระบบเก็บ Log อัตโนมัติ"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"เก็บข้อมูลเซ็นเซอร์ลงฐานข้อมูลอัตโนมัติ"})]})]}),(0,t.jsxs)("label",{className:"relative inline-block w-14 h-8 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:e,onChange:e=>s(e.target.checked),disabled:y,className:"sr-only peer"}),(0,t.jsx)("div",{className:"\n              w-14 h-8 rounded-full transition-colors duration-300\n              ".concat(e?"bg-blue-600":"bg-slate-600","\n              ").concat(y?"opacity-50 cursor-not-allowed":"","\n            "),children:(0,t.jsx)("div",{className:"\n                absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-md\n                transform transition-transform duration-300\n                ".concat(e?"translate-x-6":"translate-x-0","\n              ")})})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-slate-700 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"p-2 bg-slate-600 rounded-lg",children:(0,t.jsx)(h.A,{className:"w-5 h-5 text-slate-300"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-white",children:"ความถี่ในการเก็บข้อมูล"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:"กำหนดช่วงเวลาในการบันทึกข้อมูลเซ็นเซอร์"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-slate-600 rounded-lg p-3 border border-slate-500",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 text-slate-400"}),(0,t.jsx)("input",{type:"number",className:"bg-transparent border-none outline-none w-16 text-center font-medium text-white",value:a,min:1,max:120,onChange:e=>o(Number(e.target.value)),disabled:y}),(0,t.jsx)("span",{className:"text-slate-400 text-sm",children:"นาที"})]}),(0,t.jsx)("div",{className:"text-sm text-slate-400",children:"ต่อครั้ง"})]}),(0,t.jsx)("div",{className:"mt-3 flex gap-2",children:[5,10,15,30,60].map(e=>(0,t.jsxs)("button",{onClick:()=>o(e),disabled:y,className:"\n                  px-3 py-1 rounded-lg text-xs font-medium transition-all duration-200\n                  ".concat(a===e?"bg-blue-600 text-white":"bg-slate-600 text-slate-300 hover:bg-slate-500 border border-slate-500","\n                  ").concat(y?"opacity-50 cursor-not-allowed":"","\n                "),children:[e,"m"]},e))})]}),(0,t.jsx)("div",{className:"p-4 bg-slate-700 rounded-xl border border-slate-600",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(b.A,{className:"w-5 h-5 text-slate-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-white",children:"สถานะปัจจุบัน"}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:e?"เก็บข้อมูลทุก ".concat(a," นาที"):"ระบบเก็บ Log ปิดอยู่"})]})]})}),(0,t.jsx)("button",{onClick:A,disabled:y,className:"\n            w-full flex items-center justify-center gap-2 py-3 rounded-xl font-semibold transition-all duration-200\n            ".concat(y?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl","\n          "),children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.A,{className:"w-5 h-5 animate-spin"}),"กำลังบันทึก..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{className:"w-5 h-5"}),"บันทึกการตั้งค่า"]})})]})]})}},40646:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},46561:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]])},51154:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},56104:(e,s,a)=>{"use strict";a.d(s,{db:()=>r});var t=a(23915),l=a(81115);let d=(0,t.Dk)().length?(0,t.Dk)()[0]:(0,t.Wp)({apiKey:"AIzaSyDRn8HHi_a4SAgFDAOvm0-ks_IGVfhCEZ0",authDomain:"dashboard-4de68.firebaseapp.com",databaseURL:"https://dashboard-4de68-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"dashboard-4de68",storageBucket:"dashboard-4de68.firebasestorage.app",messagingSenderId:"759947044425",appId:"1:759947044425:web:6db0a728a2b831d26f8198",measurementId:"G-RRNL8VHNL4"}),r=(0,l.C3)(d)},68989:(e,s,a)=>{Promise.resolve().then(a.bind(a,16139))},79397:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},85339:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[507,340,441,684,358],()=>s(68989)),_N_E=e.O()}]);
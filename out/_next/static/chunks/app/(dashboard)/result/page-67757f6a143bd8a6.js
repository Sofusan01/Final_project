(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{80428:(e,a,r)=>{Promise.resolve().then(r.bind(r,81486))},81486:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>_});var t=r(95155),s=r(12115),l=r(34982),d=r(83540),i=r(42151),n=r(94754),o=r(96025),c=r(52071),x=r(69754),m=r(3350),g=r(25989);let h=(0,l.UU)("https://filyujdgxtjoqkebvegb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZpbHl1amRneHRqb3FrZWJ2ZWdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTk1NjAsImV4cCI6MjA2NjMzNTU2MH0.2-CROlvK_eQYoIvI9PqRRmLGOfLD2TQnsQfwMAyxJ0k"),b={temp:{label:"อุณหภูมิ",unit:"\xb0C",color:"#ef4444"},humid:{label:"ความชื้น",unit:"%",color:"#3b82f6"},wt:{label:"อุณหภูมิน้ำ",unit:"\xb0C",color:"#06b6d4"},ph:{label:"pH",unit:"",color:"#8b5cf6"},ec:{label:"EC",unit:"EC",color:"#10b981"},lux:{label:"แสง",unit:"lux",color:"#f59e0b"}};function y(e){let{sensorKey:a="ph",rangeHours:r=24}=e,[l,y]=(0,s.useState)([]),[u,j]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{j(!0);let e=new Date(Date.now()-60*r*6e4).toISOString(),{data:a}=await h.from("sensor_logs").select("*").gte("created_at",e).order("created_at",{ascending:!0});y(a||[]),j(!1)})()},[a,r]);let k=[];if(l.length>0){let e={};l.forEach(r=>{let t=new Date(r.created_at),s="".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"));if(e[s]||(e[s]={time:s}),["floor1","floor2","floor3"].includes(r.floor)){var l;e[s][r.floor]=null!=(l=r[a])?l:null}}),Object.values(e).forEach(e=>k.push(e))}if(u)return(0,t.jsx)("div",{className:"h-72 flex items-center justify-center text-gray-500",children:"Loading..."});if(0===k.length)return(0,t.jsx)("div",{className:"h-72 flex items-center justify-center text-gray-400",children:"No data"});let p=b[a];return(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"font-semibold text-lg mb-2",children:[p.label," (",p.unit,")"]}),(0,t.jsx)(d.u,{width:"100%",height:300,children:(0,t.jsxs)(i.b,{data:k,children:[(0,t.jsx)(n.d,{strokeDasharray:"3 3"}),(0,t.jsx)(o.W,{dataKey:"time",fontSize:12}),(0,t.jsx)(c.h,{fontSize:12}),(0,t.jsx)(x.m,{}),(0,t.jsx)(m.s,{}),(0,t.jsx)(g.N,{type:"monotone",dataKey:"floor1",stroke:"#2563eb",name:"ชั้น 1",dot:!1}),(0,t.jsx)(g.N,{type:"monotone",dataKey:"floor2",stroke:"#22c55e",name:"ชั้น 2",dot:!1}),(0,t.jsx)(g.N,{type:"monotone",dataKey:"floor3",stroke:"#eab308",name:"ชั้น 3",dot:!1})]})}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["ช่วง ",r," ชั่วโมงล่าสุด"]})]})}var u=r(72111),j=r(71539),k=r(44992),p=r(48691),f=r(30790),N=r(62098),v=r(72713),w=r(54653),I=r(15968),C=r(94498);let S=[{key:"ph",label:"pH",icon:u.A},{key:"ec",label:"EC",icon:j.A},{key:"temp",label:"อุณหภูมิ",icon:k.A},{key:"humid",label:"ความชื้น",icon:p.A},{key:"wt",label:"อุณหภูมิน้ำ",icon:f.A},{key:"lux",label:"แสง",icon:N.A}],A=[{key:"single",label:"Single",icon:v.A},{key:"grid",label:"Grid",icon:w.A},{key:"list",label:"List",icon:I.A},{key:"compare",label:"Compare",icon:C.A}];function _(){let[e,a]=(0,s.useState)("ph"),[r,l]=(0,s.useState)("single"),d=S.find(a=>a.key===e),i=(null==d?void 0:d.icon)||v.A;return(0,t.jsxs)("div",{className:"w-full max-w-7xl mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-slate-800 rounded-xl p-1",children:A.map(e=>{let a=e.icon;return(0,t.jsxs)("button",{onClick:()=>l(e.key),className:"\n                  flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200\n                  ".concat(r===e.key?"bg-white dark:bg-slate-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white","\n                "),children:[(0,t.jsx)(a,{className:"w-4 h-4"}),e.label]},e.key)})}),"single"===r&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:S.map(r=>{let s=r.icon,l=e===r.key;return(0,t.jsxs)("button",{onClick:()=>a(r.key),className:"\n                    flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200\n                    ".concat(l?"bg-gray-900 dark:bg-white text-white dark:text-gray-900":"bg-white dark:bg-slate-800 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 border border-gray-200 dark:border-slate-600","\n                  "),children:[(0,t.jsx)(s,{className:"w-4 h-4"}),r.label]},r.key)})})]}),"single"===r&&(0,t.jsx)(E,{sensor:e,currentSensor:d,CurrentIcon:i}),"grid"===r&&(0,t.jsx)(J,{}),"list"===r&&(0,t.jsx)(K,{}),"compare"===r&&(0,t.jsx)(O,{})]})}function E(e){let{sensor:a,currentSensor:r,CurrentIcon:s}=e;return(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-gray-100 dark:border-slate-700 overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-slate-700",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gray-50 dark:bg-slate-800 rounded-lg",children:(0,t.jsx)(s,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:null==r?void 0:r.label}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"เปรียบเทียบข้อมูล 3 ชั้น"})]})]})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)(y,{sensorKey:a})})]})}function J(){return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(e=>{let a=e.icon;return(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-slate-700",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),(0,t.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.label})]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("div",{className:"h-48",children:(0,t.jsx)(y,{sensorKey:e.key})})})]},e.key)})})}function K(){return(0,t.jsx)("div",{className:"space-y-6",children:S.map(e=>{let a=e.icon;return(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-slate-700",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gray-50 dark:bg-slate-800 rounded-lg",children:(0,t.jsx)(a,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.label}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Real-time monitoring"})]})]})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)(y,{sensorKey:e.key})})})]},e.key)})})}function O(){let[e,a]=(0,s.useState)(["ph","temp"]),r=e=>{a(a=>a.includes(e)?a.filter(a=>a!==e):a.length<4?[...a,e]:a)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"เลือกเซ็นเซอร์เพื่อเปรียบเทียบ (สูงสุด 4 อัน)"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:S.map(a=>{let s=a.icon,l=e.includes(a.key);return(0,t.jsxs)("button",{onClick:()=>r(a.key),className:"\n                  flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200\n                  ".concat(l?"bg-gray-900 dark:bg-white text-white dark:text-gray-900":"bg-white dark:bg-slate-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600","\n                "),children:[(0,t.jsx)(s,{className:"w-4 h-4"}),a.label]},a.key)})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.map(e=>{let a=S.find(a=>a.key===e),r=(null==a?void 0:a.icon)||v.A;return(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 overflow-hidden",children:[(0,t.jsx)("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-slate-700",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),(0,t.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:null==a?void 0:a.label})]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("div",{className:"h-56",children:(0,t.jsx)(y,{sensorKey:e})})})]},e)})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[982,311,463,441,684,358],()=>a(80428)),_N_E=e.O()}]);